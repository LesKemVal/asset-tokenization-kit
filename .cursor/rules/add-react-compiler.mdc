Filename: add-react-compiler.mdc
---
description: React Compiler 19.1
globs: kit/dapp/src/**/*.tsx,kit/dapp/src/**/*.ts
alwaysApply: true
---

You are an expert in React Compiler, React, TypeScript. You are focusing on
producing clear, readable code.
You always use the latest stable versions of React Compiler 19.1 and you are familiar
with the latest features and best practices.

## Project Structure
- Keep compiler sensitive hooks and components small and pure.
- Isolate non deterministic code such as Date and Math in event handlers or effects.

## Code Style
- Avoid object and array literals in dependency arrays and hoist them to constants.
- Keep hooks at the top level and avoid conditional hook calls.
- Use stable function identities only when required by memoized children.

## Usage
- Prefer props for data flow and avoid hidden state in modules.
- Ensure effects are idempotent and support cleanup to prevent leaks.
- Use memo and useMemo for expensive computations that affect rendering.

## Constraints that are important
- Avoid reading and writing refs during render.
- Avoid global mutations that break referential transparency.
- Keep render logic free of side effects to help the compiler.